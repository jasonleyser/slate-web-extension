!function(){window.location.href.startsWith("https://slate.host")&&window.location.href.includes("extension=true")&&document.addEventListener("keydown",(function(e){const t=new URLSearchParams(window.location.search).get("id");chrome.runtime.sendMessage({type:"GO_BACK",id:t})}));let e=!1;chrome.runtime.onMessage.addListener((function(n,s,a){return"LOAD_APP"===n.run?e?void 0:(function(e){if(t)return void("LOADER_MINI"===e.type?window.postMessage({type:"OPEN_LOADING"},"*"):window.postMessage({type:"REOPEN_APP"},"*"));t=!0;const n="chrome-extension://"+chrome.runtime.id;"LOADER_MINI"===e.type&&$("<div id='slate-loader-type' data-type='mini'></div>").prependTo("body"),location.ancestorOrigins.contains(n)||fetch(chrome.runtime.getURL("index.html")).then((e=>e.text())).then((e=>{const t=e.replace(/\/static\//g,`${n}/static/`);$(t).prependTo("body")})).catch((e=>{console.warn(e)}))}({type:n.type}),void(e=!0)):"AUTH_REQ"===n.run?(window.postMessage({type:"AUTH_REQ"},"*"),!0):"LOAD_APP_WITH_TAGS"===n.run?(window.postMessage({type:"LOAD_APP_WITH_TAGS"},"*"),!0):"OPEN_LOADING"===n.run?(window.postMessage({type:"OPEN_LOADING"},"*"),!0):"UPLOAD_DONE"===n.run?(window.postMessage({type:"UPLOAD_DONE",data:n.data},"*"),!0):"UPLOAD_FAIL"===n.run?(window.postMessage({type:"UPLOAD_FAIL"},"*"),!0):"UPLOAD_DUPLICATE"===n.run?(window.postMessage({type:"UPLOAD_DUPLICATE",data:n.data},"*"),!0):"CHECK_LINK"===n.run?(window.postMessage({type:"CHECK_LINK",data:n.data,user:n.user},"*"),!0):"OPEN_LINK"===n.run?(window.postMessage({type:"OPEN_LINK",data:n.data},"*"),!0):void 0}));let t=!1;window.addEventListener("message",(async function(t){return"SAVE_LINK"===t.data.run&&chrome.runtime.sendMessage({type:"SAVE_LINK",url:t.data.url}),"UPLOAD_START"===t.data.type&&window.postMessage({type:"UPLOAD_START"},"*"),"OPEN_LOADING"===t.data.run?(chrome.runtime.sendMessage({type:"SAVE_LINK",url:t.data.url}),!0):"OPEN_SETTINGS"===t.data.run?(chrome.runtime.sendMessage({type:"OPEN_SETTINGS"}),!0):"CHECK_LOGIN"===t.data.run?(chrome.runtime.sendMessage({type:"CHECK_LOGIN"}),!0):("SIGN_OUT"===t.data.run&&chrome.runtime.sendMessage({type:"SIGN_OUT"}),"SET_OPEN_FALSE"===t.data.run&&(e=!1,chrome.runtime.sendMessage({type:"SET_IS_SAVED_FALSE"})),t.source,void window)}))}();