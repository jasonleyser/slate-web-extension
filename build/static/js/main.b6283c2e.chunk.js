(window["webpackJsonpreact-chrome-extension-boilerplate"]=window["webpackJsonpreact-chrome-extension-boilerplate"]||[]).push([[0],{1:function(e,t,a){e.exports={"modal-window":"App_modal-window__IwfL_",modalWindow:"App_modalWindow__1u8Cs",modalBackground:"App_modalBackground__1q5C2","modal-window-inner-border":"App_modal-window-inner-border__3MRqC","modal-handle":"App_modal-handle__2h2q9",modalContent:"App_modalContent__1NR5A","modal-content-drawer-handle":"App_modal-content-drawer-handle__2YtXY","modal-close-button":"App_modal-close-button__1PY0Y",modalBody:"App_modalBody__7YUnL",modalButtonBox:"App_modalButtonBox__2bcEx",modalButton:"App_modalButton__3hnlb",modalButtonMain:"App_modalButtonMain__3EngT",modalButtonSVG:"App_modalButtonSVG__XODJy",modalButtonSVGItem:"App_modalButtonSVGItem__a8rdr",modalButtonText:"App_modalButtonText__3qD5w",modalButtonShortcut:"App_modalButtonShortcut__E5_Yt",slateButtonSelected:"App_slateButtonSelected__l79IW",modalSearchBar:"App_modalSearchBar__3WVHj",modalSearchInput:"App_modalSearchInput__3sUxK",metadataCloseIcon:"App_metadataCloseIcon__3jkyy",metadata:"App_metadata__3J-0D",metadataBox:"App_metadataBox__2Aexa",metadataImage:"App_metadataImage__2ohRy",metadataBox2:"App_metadataBox2__3p5m2",metaDataTitle:"App_metaDataTitle__25qMT",modalCloseButton:"App_modalCloseButton__3aBs9",metaDataUrl:"App_metaDataUrl__2WYL9",loaderWindow:"App_loaderWindow__1Eclj",loaderBody:"App_loaderBody__1v8-C",loaderContent:"App_loaderContent__3iTcb",loaderText:"App_loaderText__1ROCI",loaderBox:"App_loaderBox__1qVVH",loaderImage:"App_loaderImage__31l14",loaderFooter:"App_loaderFooter__2bpu5",loaderFooterRight:"App_loaderFooterRight__3o5l4",loaderFooterLeft:"App_loaderFooterLeft__3IBvn",loaderClose:"App_loaderClose__xEwdJ",loaderFadeOut:"App_loaderFadeOut__RfYI8",loaderFadeIn:"App_loaderFadeIn__3H4DX",hiddenModal:"App_hiddenModal__2dsNp",visableModal:"App_visableModal__1zisE",modalSearchItem:"App_modalSearchItem__3WuRH",modalSearchLoading:"App_modalSearchLoading__QrsB8",modalSearchDropdown:"App_modalSearchDropdown__3deU8"}},12:function(e,t,a){e.exports=a(24)},24:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),l=a(6),r=a.n(l),d=a(3),i=function(){return{windowPosition:{x:100,y:100}}},c=o.a.createContext({}),m=function(e){var t=e.children,a=i().windowPosition,l=Object(n.useState)(void 0),r=Object(d.a)(l,2),m=r[0],s=r[1],u=Object(n.useState)({query:null}),p=Object(d.a)(u,2),_=(p[0],p[1],Object(n.useState)({title:document.title,description:document.description,url:window.location.href})),g=Object(d.a)(_,2),E=g[0];g[1];return Object(n.useEffect)((function(){window.addEventListener("message",(function(e){console.log("this is a messgae from the modal ModalProvider"),e.source===window&&e.data.type&&"EXTENSION_ID_RESULT"===e.data.type&&s(e.data.extensionId)}))}),[]),console.log("document",E),o.a.createElement(c.Provider,{value:{extensionId:m,getExtensionId:function(){window.postMessage({type:"GET_EXTENSION_ID"},"*")},windowPosition:a,pageData:E}},t)},s=a(1),u=a.n(s),p=function(e){return o.a.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.a.createElement("path",{d:"M15 5L5 15",stroke:"#48494A","stroke-width":"1.25","stroke-linecap":"round","stroke-linejoin":"round"}),o.a.createElement("path",{d:"M5 5L15 15",stroke:"#48494A","stroke-width":"1.25","stroke-linecap":"round","stroke-linejoin":"round"}))},_=function(e){return o.a.createElement("svg",{className:u.a.modalButtonSVGItem,style:{marginLeft:"2px",paddingTop:"4px"},width:"14",height:"16",viewBox:"0 0 16 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.a.createElement("path",{d:"M15 19L8 14L1 19V3C1 2.46957 1.21071 1.96086 1.58579 1.58579C1.96086 1.21071 2.46957 1 3 1H13C13.5304 1 14.0391 1.21071 14.4142 1.58579C14.7893 1.96086 15 2.46957 15 3V19Z",stroke:"#00050A","stroke-width":"1.875","stroke-linecap":"round","stroke-linejoin":"round"}))},g=function(e){return o.a.createElement("svg",{className:u.a.modalButtonSVGItem,style:{paddingTop:"4px"},width:"16",height:"16",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.a.createElement("path",{d:"M19.59 12.41L12.42 19.58C12.2343 19.766 12.0137 19.9135 11.7709 20.0141C11.5281 20.1148 11.2678 20.1666 11.005 20.1666C10.7422 20.1666 10.4819 20.1148 10.2391 20.0141C9.99632 19.9135 9.77575 19.766 9.59 19.58L1 11V1H11L19.59 9.59C19.9625 9.96473 20.1716 10.4716 20.1716 11C20.1716 11.5284 19.9625 12.0353 19.59 12.41V12.41Z",stroke:"#00050A","stroke-width":"1.875","stroke-linecap":"round","stroke-linejoin":"round"}))},E=function(e){return o.a.createElement("svg",{className:u.a.modalButtonSVGItem,style:{marginTop:"4px",marginRight:"-6px"},xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"#00050A","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},o.a.createElement("circle",{cx:"12",cy:"12",r:"10"}),o.a.createElement("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),o.a.createElement("line",{x1:"8",y1:"12",x2:"16",y2:"12"}))},w=function(e){return o.a.createElement("svg",{style:{marginTop:"4px",marginRight:"-6px"},width:"16",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#00050A",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o.a.createElement("circle",{cx:"12",cy:"12",r:"3"}),o.a.createElement("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"}))},h=function(e){var t;"tag"==e.icon?t=o.a.createElement(g,null):"bookmark"==e.icon?t=o.a.createElement(_,null):"plus"==e.icon?t=o.a.createElement(E,null):"settings"==e.icon&&(t=o.a.createElement(w,null));return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{onClick:function(t){t.preventDefault(),window.postMessage({run:e.run,url:e.data.url},"*")},className:u.a.modalButtonMain},o.a.createElement("div",{className:u.a.modalButtonSVG},t),o.a.createElement("div",{className:u.a.modalButtonText},e.text)))},v=function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement("img",{className:u.a.metadataImage,src:e.url,width:e.width,height:e.height}))},f=function(e){var t,a=e.title.slice(0,25)+(e.title.length>25?"...":"");return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:u.a.metadata},o.a.createElement("div",{className:u.a.metadataBox},o.a.createElement(v,{url:e.image,width:"48px",height:"48px"})),o.a.createElement("div",{className:u.a.metadataBox2},o.a.createElement("div",{className:u.a.metaDataTitle},a,o.a.createElement("div",{className:u.a.metadataCloseIcon,onClick:function(){window.postMessage({type:"CLOSE_APP"},"*")}},o.a.createElement(p,null))),o.a.createElement("div",{style:{display:"flex",lineHeight:"12px"}},o.a.createElement("img",{src:e.favicon,width:"14px",height:"14px",style:{display:"inline",marginRight:"8px"}}),o.a.createElement("div",{className:u.a.metadataUrl},(t=e.url,new URL(t).hostname))))))},A=function(e){var t=Object(n.useState)({query:null}),a=Object(d.a)(t,2),l=(a[0],a[1],Object(n.useState)(!1)),r=Object(d.a)(l,2),i=(r[0],r[1],Object(n.useState)({show:!1})),m=Object(d.a)(i,2),s=(m[0],m[1]),p=Object(n.useState)({image:null,title:null}),_=Object(d.a)(p,2),g=(_[0],_[1],Object(n.useState)({title:document.title,description:document.description,url:window.location.href})),E=Object(d.a)(g,2),w=E[0],v=(E[1],function(){window.postMessage({type:"CLOSE_APP"},"*")});return window.addEventListener("message",(function(e){"LOAD_APP_WITH_TAGS"===e.data.type&&s({show:!0})})),o.a.createElement(c.Consumer,null,(function(t){t.windowPosition,t.hasDraggedWindowPosition,t.extensionId,t.getExtensionId;var a=t.pageData;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{id:"modal",className:u.a.modalWindow},o.a.createElement("div",{className:u.a.modalBody},o.a.createElement("div",{className:u.a.modalContent},o.a.createElement(f,{url:w.url,title:w.title,image:e.image,favicon:e.favicon}),o.a.createElement("div",{className:u.a.modalButtonBox},o.a.createElement(h,{text:"Bookmark current page",shortcut:"Option B",icon:"bookmark",run:"SAVE_LINK",data:a}),o.a.createElement(h,{text:"Add channel tags",shortcut:"Option C",icon:"tag"}),o.a.createElement(h,{text:"Settings",shortcut:"Option C",icon:"settings",run:"OPEN_SETTINGS",data:a}))))),o.a.createElement("div",{className:u.a.modalBackground,onClick:v}))}))},x=(a(9),a(5)),S=function(e){var t=Object(n.useState)(!0),a=Object(d.a)(t,2),l=a[0],r=a[1],i=Object(n.useState)({status:"uploading",data:null,error:!1}),m=Object(d.a)(i,2),s=m[0],_=m[1],g=function(){r(!1)};window.addEventListener("message",(function(e){if("UPLOAD_DONE"===e.data.type){_({status:"complete",data:e.data.data.cid});var t=setTimeout((function(){g()}),1e4);return function(){return clearTimeout(t)}}"UPLOAD_FAIL"===e.data.type&&_({status:"error"}),"UPLOAD_DUPLICATE"===e.data.type&&_({status:"duplicate",data:e.data.data.cid})}));var E=e.title.slice(0,28)+(e.title.length>28?"...":""),w=function(e){var t=e.upload.data?"https://slate.host/_/data?cid=".concat(e.upload.data):null;return o.a.createElement(o.a.Fragment,null,"uploading"===e.upload.status&&o.a.createElement("div",{className:u.a.loaderFooterLeft},"Saving..."),"complete"===e.upload.status&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:u.a.loaderFooterLeft},"Saved"),o.a.createElement("div",{className:u.a.loaderFooterRight},o.a.createElement("a",{href:t,style:{color:"#0084FF",fontWeight:"600",textDecoration:"none"},target:"_blank"},"View"))),"duplicate"===e.upload.status&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:u.a.loaderFooterLeft,style:{color:"#34D159"}},"Already exists"),o.a.createElement("div",{className:u.a.loaderFooterRight},o.a.createElement("a",{href:t,style:{color:"#0084FF",fontWeight:"600",textDecoration:"none"},target:"_blank"},"View"))),"error"===e.upload.status&&o.a.createElement("div",{className:u.a.loaderFooterLeft,style:{color:"#FF4530"}},"Failed to save"))};return o.a.createElement(c.Consumer,null,(function(t){t.windowPosition,t.hasDraggedWindowPosition,t.extensionId,t.getExtensionId,t.pageData;return o.a.createElement(o.a.Fragment,null,l&&o.a.createElement("div",{id:"modal",className:u.a.loaderWindow},o.a.createElement("div",{className:u.a.loaderContent},o.a.createElement("div",{className:u.a.loaderText},o.a.createElement("img",{className:u.a.loaderImage,src:e.image}),E,o.a.createElement("div",{onClick:g,className:u.a.loaderClose},o.a.createElement(p,null))),o.a.createElement("div",{className:u.a.loaderFooter},o.a.createElement(w,{upload:s})))))}))};a(20),a(4),a(7),a(10),a(22);a(23);var B=function(){var e=Object(n.useState)(!0),t=Object(d.a)(e,2),a=t[0],l=t[1],r=Object(n.useState)(!1),i=Object(d.a)(r,2),c=i[0],s=i[1],u=Object(n.useState)(!1),p=Object(d.a)(u,2),_=(p[0],p[1]),g=Object(n.useState)({image:null,title:null}),E=Object(d.a)(g,2),w=E[0],h=E[1];window.addEventListener("message",(function(e){"UPLOAD_START"===e.data.type&&(l(!1),s(!0)),"CLOSE_APP"===e.data.type&&l(!1),"OPEN_LOADING"===e.data.type&&(l(!1),s(!0)),"OPEN_SCREENSHOT_SHORTCUT"===e.data.type&&(l(!1),_(!0))})),Object(n.useEffect)((function(){var e=v();h({image:e.image,favicon:e.favicon})}),[]);var v=function(){var e={};return document.querySelector("meta[property='og:image']")?e.image=document.querySelector("meta[property='og:image']").getAttribute("content"):e.image="https://slate.textile.io/ipfs/bafkreidwm3g5q4vm32j42yofeccacjqhpbm2u3j4gq4rnsihg54zsmz6pi",document.querySelector("link[rel~='icon']")&&(e.favicon=document.querySelector("link[rel~='icon']").getAttribute("href")),e};return o.a.createElement(o.a.Fragment,null,a&&o.a.createElement(m,null,o.a.createElement("div",null,o.a.createElement(x.a,{keyName:"esc,alt+b",onKeyDown:function(e,t,a){"esc"===e&&l(!1),"alt+b"===e&&window.postMessage({run:"OPEN_LOADING",url:window.location.href},"*")}.bind(this)},o.a.createElement(A,{image:w.image,favicon:w.favicon})))),c&&o.a.createElement(S,{image:w.image,title:document.title}))};r.a.render(o.a.createElement(o.a.Fragment,null,o.a.createElement(o.a.StrictMode,null,o.a.createElement(B,null))),document.getElementById("modal-window"))}},[[12,1,2]]]);
//# sourceMappingURL=main.b6283c2e.chunk.js.map